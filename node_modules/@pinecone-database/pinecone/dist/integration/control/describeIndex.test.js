"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const test_context_1 = require("../test-context");
let pinecone, serverlessIndexName;
beforeAll(async () => {
    const fixtures = await (0, test_context_1.getTestContext)();
    pinecone = fixtures.client;
    serverlessIndexName = fixtures.serverlessIndex.name;
});
describe('describe index; serverless', () => {
    test('describe index, happy path', async () => {
        const description = await pinecone.describeIndex(serverlessIndexName);
        expect(description.name).toEqual(serverlessIndexName);
        expect(description.dimension).toEqual(2);
        expect(description.metric).toEqual('dotproduct');
        expect(description.host).toBeDefined();
        const spec = description.spec;
        expect(spec.serverless).toBeDefined();
        expect(spec.serverless?.cloud).toEqual('aws');
        expect(spec.serverless?.region).toEqual('us-west-2');
        expect(description.status.ready).toEqual(true);
        expect(description.status.state).toEqual('Ready');
        expect(description.tags).toEqual({
            project: 'pinecone-integration-tests',
        });
    });
});
test('describe index with invalid index name', async () => {
    expect.assertions(1);
    try {
        return await pinecone.describeIndex('non-existent-index');
    }
    catch (e) {
        const err = e;
        expect(err.name).toEqual('PineconeNotFoundError');
    }
});
//# sourceMappingURL=describeIndex.test.js.map