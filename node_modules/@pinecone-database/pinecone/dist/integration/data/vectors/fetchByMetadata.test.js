"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const test_helpers_1 = require("../../test-helpers");
const test_context_1 = require("../../test-context");
let pinecone, serverlessIndex, metadataKey, metadataValue;
beforeAll(async () => {
    const fixtures = await (0, test_context_1.getTestContext)();
    pinecone = fixtures.client;
    serverlessIndex = pinecone.index({
        name: fixtures.serverlessIndex.name,
        namespace: test_helpers_1.globalNamespaceOne,
    });
    metadataKey = fixtures.serverlessIndex.metadataFilter.key;
    metadataValue = fixtures.serverlessIndex.metadataFilter.value;
});
describe('fetch by metadata', () => {
    test('fetch by metadata filter', async () => {
        const result = await serverlessIndex.fetchByMetadata({
            filter: { [metadataKey]: { $eq: metadataValue } },
        });
        Object.values(result.records).forEach((record) => {
            expect(record.metadata).toMatchObject({ [metadataKey]: metadataValue });
        });
    });
});
//# sourceMappingURL=fetchByMetadata.test.js.map