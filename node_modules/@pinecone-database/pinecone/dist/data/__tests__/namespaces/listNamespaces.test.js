"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const db_data_1 = require("../../../pinecone-generated-ts-fetch/db_data");
const listNamespaces_1 = require("../../namespaces/listNamespaces");
const setupResponse = (response, isSuccess) => {
    const fakeListNamespaces = jest
        .fn()
        .mockImplementation(() => isSuccess ? Promise.resolve(response) : Promise.reject(response));
    const NOA = {
        listNamespacesOperation: fakeListNamespaces,
    };
    const NamespaceOperationsProvider = {
        provide: async () => NOA,
    };
    const cmd = (0, listNamespaces_1.listNamespaces)(NamespaceOperationsProvider);
    return { fakeListNamespaces, NOA, NamespaceOperationsProvider, cmd };
};
describe('listNamespaces', () => {
    test('should call listNamespacesOperation with correct request', async () => {
        const { cmd, fakeListNamespaces } = setupResponse({ namespaces: [] }, true);
        const limit = 1;
        const paginationToken = 'fake-pagination-token-123123123';
        const prefix = 'fake-prefix-123123123';
        await cmd({ limit, paginationToken, prefix });
        expect(fakeListNamespaces).toHaveBeenCalledWith({
            xPineconeApiVersion: db_data_1.X_PINECONE_API_VERSION,
            limit,
            paginationToken,
            prefix,
        });
    });
});
//# sourceMappingURL=listNamespaces.test.js.map