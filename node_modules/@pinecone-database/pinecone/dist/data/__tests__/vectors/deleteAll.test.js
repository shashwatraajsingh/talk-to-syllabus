"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const deleteAll_1 = require("../../vectors/deleteAll");
const deleteOne_test_1 = require("./deleteOne.test");
const api_version_1 = require("../../../pinecone-generated-ts-fetch/db_data/api_version");
describe('deleteAll', () => {
    test('calls the openapi delete endpoint, passing deleteAll with target namespace', async () => {
        const { VectorProvider, VOA } = (0, deleteOne_test_1.setupDeleteSuccess)(undefined);
        const deleteAllFn = (0, deleteAll_1.deleteAll)(VectorProvider, 'namespace');
        const returned = await deleteAllFn();
        expect(returned).toBe(void 0);
        expect(VOA.deleteVectors).toHaveBeenCalledWith({
            deleteRequest: { deleteAll: true, namespace: 'namespace' },
            xPineconeApiVersion: api_version_1.X_PINECONE_API_VERSION,
        });
    });
    test('uses namespace from options when provided', async () => {
        const { VectorProvider, VOA } = (0, deleteOne_test_1.setupDeleteSuccess)(undefined);
        const deleteAllFn = (0, deleteAll_1.deleteAll)(VectorProvider, 'namespace');
        await deleteAllFn({ namespace: 'custom-namespace' });
        expect(VOA.deleteVectors).toHaveBeenCalledWith({
            deleteRequest: { deleteAll: true, namespace: 'custom-namespace' },
            xPineconeApiVersion: api_version_1.X_PINECONE_API_VERSION,
        });
    });
});
//# sourceMappingURL=deleteAll.test.js.map