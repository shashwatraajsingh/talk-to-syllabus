"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const configureIndex_1 = require("../configureIndex");
const errors_1 = require("../../errors");
const db_control_1 = require("../../pinecone-generated-ts-fetch/db_control");
describe('configureIndex argument validations', () => {
    let MIA;
    beforeEach(() => {
        MIA = new db_control_1.ManageIndexesApi();
        MIA.configureIndex = jest.fn();
    });
    describe('required configurations', () => {
        test('should throw if index name is not provided', async () => {
            // @ts-expect-error - invalid options
            const toThrow = async () => await (0, configureIndex_1.configureIndex)(MIA)({});
            await expect(toThrow).rejects.toThrowError(errors_1.PineconeArgumentError);
            await expect(toThrow).rejects.toThrowError('You must pass a non-empty string for `name` to configureIndex.');
        });
        test('should throw if index name is empty string', async () => {
            const toThrow = async () => await (0, configureIndex_1.configureIndex)(MIA)({ name: '', podReplicas: 2 });
            await expect(toThrow).rejects.toThrowError(errors_1.PineconeArgumentError);
            await expect(toThrow).rejects.toThrowError('You must pass a non-empty string for `name` to configureIndex.');
        });
        test('should throw if spec or deletionProtection are not provided', async () => {
            const toThrowSpec = async () => await (0, configureIndex_1.configureIndex)(MIA)({ name: 'index-name' });
            await expect(toThrowSpec).rejects.toThrowError(errors_1.PineconeArgumentError);
            await expect(toThrowSpec).rejects.toThrowError('You must pass at least one configuration option to configureIndex.');
        });
        test('should throw if no configuration options are provided', async () => {
            const toThrow = async () => await (0, configureIndex_1.configureIndex)(MIA)({ name: 'index-name' });
            await expect(toThrow).rejects.toThrowError(errors_1.PineconeArgumentError);
            await expect(toThrow).rejects.toThrowError('You must pass at least one configuration option to configureIndex.');
        });
    });
});
//# sourceMappingURL=configureIndex.validation.test.js.map